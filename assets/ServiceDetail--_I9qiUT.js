import{A as n,b as D,d as L,u as U,a as m,j as e,e as I,m as x,C as H,B as h}from"./index-Ck2EgO-1.js";import{C as p}from"./Card-DdUEfcKR.js";import{c as o,B as j}from"./index-CKNSqqfH.js";import{G as O}from"./GradientText-C_AMse_i.js";import{A as W}from"./arrow-left-BXfN_HOh.js";import{S as y}from"./star-BjpL2b0u.js";import{U as _}from"./users-D8Uc0QYP.js";import{C as J}from"./clock-F5-Yp8Wi.js";import{D as M}from"./dollar-sign-YBQgvHpg.js";import{S as V,H as Z}from"./share-2-BOgf-DZs.js";import{A as Q}from"./award-COj8C6SX.js";import{Z as K}from"./zap-aOVQrNKF.js";import{M as X}from"./message-circle-DMhDCbNL.js";const d=()=>{const i=localStorage.getItem("token");return{"Content-Type":"application/json",...i&&{Authorization:`Bearer ${i}`}}},g={getAll:async(i={})=>{try{const r=new URLSearchParams(i).toString(),a=`${n}/services${r?`?${r}`:""}`,s=await fetch(a,{method:"GET",headers:d()}),l=await s.json();if(!s.ok)throw new Error(l.message||"Failed to fetch services");return l}catch(r){throw console.error("Get services error:",r),r}},getById:async i=>{try{const r=await fetch(`${n}/services/${i}`,{method:"GET",headers:d()}),a=await r.json();if(!r.ok)throw new Error(a.message||"Failed to fetch service");return a}catch(r){throw console.error("Get service error:",r),r}},getReviews:async i=>{try{const r=await fetch(`${n}/services/${i}/reviews`,{method:"GET",headers:d()}),a=await r.json();if(!r.ok)throw new Error(a.message||"Failed to fetch reviews");return a}catch(r){throw console.error("Get reviews error:",r),r}},requestService:async(i,r)=>{try{const a=await fetch(`${n}/services/${i}/request`,{method:"POST",headers:d(),body:JSON.stringify(r)}),s=await a.json();if(!a.ok)throw new Error(s.message||"Failed to request service");return s}catch(a){throw console.error("Service request error:",a),a}},addReview:async(i,r)=>{try{const a=await fetch(`${n}/services/${i}/reviews`,{method:"POST",headers:d(),body:JSON.stringify(r)}),s=await a.json();if(!a.ok)throw new Error(s.message||"Failed to add review");return s}catch(a){throw console.error("Add review error:",a),a}},getCategories:async()=>{try{const i=await fetch(`${n}/services/categories`,{method:"GET",headers:d()}),r=await i.json();if(!i.ok)throw new Error(r.message||"Failed to fetch categories");return r}catch(i){throw console.error("Get categories error:",i),i}},search:async(i,r={})=>{try{const a={q:i,...r},s=new URLSearchParams(a).toString(),l=await fetch(`${n}/services/search?${s}`,{method:"GET",headers:d()}),u=await l.json();if(!l.ok)throw new Error(u.message||"Search failed");return u}catch(a){throw console.error("Search error:",a),a}}},xe=()=>{var $,k,q,C,A;const{id:i}=D(),r=L(),{user:a}=U(),[s,l]=m.useState(null),[u,G]=m.useState(!0),[w,N]=m.useState(!1),[b,T]=m.useState([]),[f,v]=m.useState({rating:5,comment:""});m.useEffect(()=>{S(),R()},[i]);const S=async()=>{try{const t=await g.getById(i);l(t.data)}catch{o.error("Failed to load service details"),r("/services")}finally{G(!1)}},R=async()=>{try{const t=await g.getReviews(i);T(t.data)}catch(t){console.error("Failed to load reviews:",t)}},B=async()=>{if(!a){o.error("Please login to request a service"),r("/login");return}N(!0);try{await g.requestService(i,{message:"I would like to request this service",urgency:"medium"}),o.success("Service request submitted successfully!")}catch{o.error("Failed to submit service request")}finally{N(!1)}},P=async t=>{if(t.preventDefault(),!a){o.error("Please login to submit a review");return}try{await g.addReview(i,f),o.success("Review submitted successfully!"),v({rating:5,comment:""}),R(),S()}catch{o.error("Failed to submit review")}};return u?e.jsx(I,{fullScreen:!0}):s?e.jsx("div",{className:"min-h-screen bg-gradient-to-br from-blue-50 via-white to-purple-50",children:e.jsxs("div",{className:"container mx-auto px-4 py-8",children:[e.jsxs(x.button,{initial:{opacity:0,x:-20},animate:{opacity:1,x:0},onClick:()=>r("/services"),className:"flex items-center gap-2 text-gray-600 hover:text-blue-600 mb-6 transition-colors",children:[e.jsx(W,{size:20}),"Back to Services"]}),e.jsxs("div",{className:"grid lg:grid-cols-3 gap-8",children:[e.jsxs("div",{className:"lg:col-span-2 space-y-6",children:[e.jsx(x.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},children:e.jsxs(p,{className:"p-8",children:[e.jsxs("div",{className:"flex flex-wrap gap-2 mb-4",children:[e.jsx(j,{variant:"primary",children:s.category}),s.featured&&e.jsx(j,{variant:"gold",children:"Featured"}),($=s.tags)==null?void 0:$.map(t=>e.jsx(j,{variant:"outline",children:t},t))]}),e.jsx(O,{className:"text-3xl font-bold mb-4",children:s.title}),e.jsxs("div",{className:"flex items-center gap-6 mb-6",children:[e.jsxs("div",{className:"flex items-center gap-1",children:[e.jsx(y,{className:"text-yellow-400 fill-current",size:20}),e.jsx("span",{className:"font-semibold",children:((k=s.averageRating)==null?void 0:k.toFixed(1))||"N/A"}),e.jsxs("span",{className:"text-gray-500",children:["(",s.totalReviews||0," reviews)"]})]}),e.jsxs("div",{className:"flex items-center gap-1 text-gray-600",children:[e.jsx(_,{size:16}),e.jsxs("span",{children:[s.popularity||0," requests"]})]}),e.jsxs("div",{className:"flex items-center gap-1 text-gray-600",children:[e.jsx(J,{size:16}),e.jsx("span",{children:s.deliveryTime||"Contact for timeline"})]})]}),e.jsx("p",{className:"text-gray-700 leading-relaxed mb-6",children:s.description}),s.features&&s.features.length>0&&e.jsxs("div",{className:"mb-6",children:[e.jsx("h3",{className:"text-xl font-semibold mb-4",children:"What's Included"}),e.jsx("div",{className:"grid md:grid-cols-2 gap-3",children:s.features.map((t,c)=>e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(H,{className:"text-green-500",size:16}),e.jsx("span",{children:t})]},c))})]}),s.gallery&&s.gallery.length>0&&e.jsxs("div",{className:"mb-6",children:[e.jsx("h3",{className:"text-xl font-semibold mb-4",children:"Gallery"}),e.jsx("div",{className:"grid grid-cols-2 md:grid-cols-3 gap-4",children:s.gallery.map((t,c)=>e.jsx("img",{src:t||"/placeholder.svg",alt:`${s.title} ${c+1}`,className:"rounded-lg object-cover h-32 w-full hover:scale-105 transition-transform cursor-pointer"},c))})]})]})}),e.jsx(x.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:.2},children:e.jsxs(p,{className:"p-6",children:[e.jsx("h3",{className:"text-2xl font-bold mb-6",children:"Reviews & Ratings"}),a&&e.jsxs("form",{onSubmit:P,className:"mb-8 p-4 bg-gray-50 rounded-lg",children:[e.jsx("h4",{className:"font-semibold mb-4",children:"Write a Review"}),e.jsxs("div",{className:"mb-4",children:[e.jsx("label",{className:"block text-sm font-medium mb-2",children:"Rating"}),e.jsx("div",{className:"flex gap-1",children:[1,2,3,4,5].map(t=>e.jsx("button",{type:"button",onClick:()=>v(c=>({...c,rating:t})),className:`p-1 ${t<=f.rating?"text-yellow-400":"text-gray-300"}`,children:e.jsx(y,{size:20,fill:"currentColor"})},t))})]}),e.jsxs("div",{className:"mb-4",children:[e.jsx("label",{className:"block text-sm font-medium mb-2",children:"Comment"}),e.jsx("textarea",{value:f.comment,onChange:t=>v(c=>({...c,comment:t.target.value})),className:"w-full p-3 border rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent",rows:"3",placeholder:"Share your experience...",required:!0})]}),e.jsx(h,{type:"submit",className:"w-full",children:"Submit Review"})]}),e.jsxs("div",{className:"space-y-4",children:[b.map(t=>{var c,E,z;return e.jsxs("div",{className:"border-b pb-4 last:border-b-0",children:[e.jsxs("div",{className:"flex items-center gap-3 mb-2",children:[e.jsx("div",{className:"w-10 h-10 bg-gradient-to-r from-blue-500 to-purple-500 rounded-full flex items-center justify-center text-white font-semibold",children:((E=(c=t.user)==null?void 0:c.name)==null?void 0:E.charAt(0))||"U"}),e.jsxs("div",{children:[e.jsx("p",{className:"font-semibold",children:((z=t.user)==null?void 0:z.name)||"Anonymous"}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("div",{className:"flex",children:[1,2,3,4,5].map(F=>e.jsx(y,{size:14,className:F<=t.rating?"text-yellow-400 fill-current":"text-gray-300"},F))}),e.jsx("span",{className:"text-sm text-gray-500",children:new Date(t.createdAt).toLocaleDateString()})]})]})]}),e.jsx("p",{className:"text-gray-700",children:t.comment})]},t._id)}),b.length===0&&e.jsx("p",{className:"text-center text-gray-500 py-8",children:"No reviews yet. Be the first to review!"})]})]})})]}),e.jsxs("div",{className:"space-y-6",children:[e.jsx(x.div,{initial:{opacity:0,x:20},animate:{opacity:1,x:0},transition:{delay:.1},children:e.jsxs(p,{className:"p-6 sticky top-6",children:[e.jsxs("div",{className:"text-center mb-6",children:[e.jsxs("div",{className:"flex items-center justify-center gap-2 mb-2",children:[e.jsx(M,{className:"text-green-500",size:24}),e.jsx("span",{className:"text-3xl font-bold text-gray-900",children:((q=s.pricing)==null?void 0:q.type)==="fixed"?`$${s.pricing.amount}`:((C=s.pricing)==null?void 0:C.type)==="hourly"?`$${s.pricing.amount}/hr`:"Contact for Quote"})]}),((A=s.pricing)==null?void 0:A.type)==="package"&&e.jsxs("p",{className:"text-sm text-gray-600",children:["Starting from $",s.pricing.amount]})]}),e.jsx(h,{onClick:B,disabled:w,className:"w-full mb-4",size:"lg",children:w?"Requesting...":"Request Service"}),e.jsxs("div",{className:"flex gap-2",children:[e.jsxs(h,{variant:"outline",className:"flex-1",children:[e.jsx(V,{size:16}),"Share"]}),e.jsxs(h,{variant:"outline",className:"flex-1",children:[e.jsx(Z,{size:16}),"Save"]})]}),e.jsxs("div",{className:"mt-6 pt-6 border-t space-y-3",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("span",{className:"text-gray-600",children:"Response Time"}),e.jsx("span",{className:"font-semibold",children:"Within 24 hours"})]}),e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("span",{className:"text-gray-600",children:"Delivery"}),e.jsx("span",{className:"font-semibold",children:s.deliveryTime||"Varies"})]}),e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("span",{className:"text-gray-600",children:"Revisions"}),e.jsx("span",{className:"font-semibold",children:"Unlimited"})]})]}),e.jsxs("div",{className:"mt-6 pt-6 border-t",children:[e.jsxs("div",{className:"flex items-center gap-2 text-sm text-gray-600 mb-2",children:[e.jsx(Q,{className:"text-blue-500",size:16}),e.jsx("span",{children:"Verified Service Provider"})]}),e.jsxs("div",{className:"flex items-center gap-2 text-sm text-gray-600",children:[e.jsx(K,{className:"text-yellow-500",size:16}),e.jsx("span",{children:"Fast Delivery Guaranteed"})]})]})]})}),e.jsx(x.div,{initial:{opacity:0,x:20},animate:{opacity:1,x:0},transition:{delay:.2},children:e.jsxs(p,{className:"p-6",children:[e.jsx("h3",{className:"font-semibold mb-4",children:"Need Help?"}),e.jsx("p",{className:"text-gray-600 text-sm mb-4",children:"Have questions about this service? Our team is here to help."}),e.jsxs(h,{variant:"outline",className:"w-full",children:[e.jsx(X,{size:16}),"Contact Support"]})]})})]})]})]})}):null};export{xe as default};
