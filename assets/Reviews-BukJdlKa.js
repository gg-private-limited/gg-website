import{c as _,a as n,j as e,e as M,m as x,B as o}from"./index-Ck2EgO-1.js";import{u as v}from"./userService-BNfsmJ1f.js";import{C as y}from"./Card-DdUEfcKR.js";import{c as m,B as F}from"./index-CKNSqqfH.js";import{G as B}from"./GradientText-C_AMse_i.js";import{P as E}from"./plus-CCNAuJnC.js";import{S as T}from"./search-gryArPGd.js";import{C as A}from"./calendar-9uU3rAgK.js";import{S as D}from"./square-pen-CvUNzUUs.js";import{M as P}from"./message-circle-DMhDCbNL.js";import{S as I}from"./star-BjpL2b0u.js";/**
 * @license lucide-react v0.511.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const G=[["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M19 6v14c0 1-1 2-2 2H7c-1 0-2-1-2-2V6",key:"4alrt4"}],["path",{d:"M8 6V4c0-1 1-2 2-2h4c1 0 2 1 2 2v2",key:"v07s0e"}],["line",{x1:"10",x2:"10",y1:"11",y2:"17",key:"1uufr5"}],["line",{x1:"14",x2:"14",y1:"11",y2:"17",key:"xtxkd"}]],V=_("trash-2",G),Z=()=>{const[N,b]=n.useState([]),[w,S]=n.useState(!0),[l,R]=n.useState("all"),[d,C]=n.useState(""),[k,u]=n.useState(null),[h,p]=n.useState({rating:5,comment:"",serviceId:""});n.useEffect(()=>{j()},[]);const j=async()=>{try{const s=await v.getReviews();b(s.data)}catch{m.error("Failed to load reviews")}finally{S(!1)}},z=async(s,a)=>{try{await v.updateReview(s,a),m.success("Review updated successfully!"),u(null),j()}catch{m.error("Failed to update review")}},L=async s=>{if(confirm("Are you sure you want to delete this review?"))try{await v.deleteReview(s),m.success("Review deleted successfully!"),j()}catch{m.error("Failed to delete review")}},f=(s,a=!1,r=null)=>e.jsx("div",{className:"flex gap-1",children:[1,2,3,4,5].map(t=>e.jsx("button",{type:"button",onClick:()=>a&&r&&r(t),className:`${a?"cursor-pointer hover:scale-110":"cursor-default"} transition-transform`,disabled:!a,children:e.jsx(I,{size:20,className:t<=s?"text-yellow-400 fill-current":"text-gray-300"})},t))}),g=N.filter(s=>{var t,i,c;const a=l==="all"||l==="high"&&s.rating>=4||l==="medium"&&s.rating===3||l==="low"&&s.rating<=2,r=((i=(t=s.service)==null?void 0:t.title)==null?void 0:i.toLowerCase().includes(d.toLowerCase()))||((c=s.comment)==null?void 0:c.toLowerCase().includes(d.toLowerCase()));return a&&r});return w?e.jsx(M,{fullScreen:!0}):e.jsx("div",{className:"min-h-screen bg-gradient-to-br from-purple-50 via-white to-pink-50",children:e.jsxs("div",{className:"container mx-auto px-4 py-8",children:[e.jsx(x.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},className:"mb-8",children:e.jsxs("div",{className:"flex justify-between items-start",children:[e.jsxs("div",{children:[e.jsx(B,{className:"text-3xl font-bold mb-2",children:"My Reviews"}),e.jsx("p",{className:"text-gray-600",children:"Manage your service reviews and feedback"})]}),e.jsxs(o,{children:[e.jsx(E,{size:16}),"Write Review"]})]})}),e.jsx(x.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:.1},className:"mb-6",children:e.jsx(y,{className:"p-6",children:e.jsxs("div",{className:"flex flex-col md:flex-row gap-4",children:[e.jsx("div",{className:"flex-1",children:e.jsxs("div",{className:"relative",children:[e.jsx(T,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-400",size:20}),e.jsx("input",{type:"text",placeholder:"Search reviews...",value:d,onChange:s=>C(s.target.value),className:"w-full pl-10 pr-4 py-2 border rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent"})]})}),e.jsx("div",{className:"flex gap-2",children:e.jsxs("select",{value:l,onChange:s=>R(s.target.value),className:"px-4 py-2 border rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent",children:[e.jsx("option",{value:"all",children:"All Ratings"}),e.jsx("option",{value:"high",children:"4-5 Stars"}),e.jsx("option",{value:"medium",children:"3 Stars"}),e.jsx("option",{value:"low",children:"1-2 Stars"})]})})]})})}),e.jsxs("div",{className:"space-y-6",children:[g.map((s,a)=>{var r,t;return e.jsx(x.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:a*.1},children:e.jsx(y,{className:"p-6 hover:shadow-lg transition-shadow",children:k===s._id?e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium mb-2",children:"Rating"}),f(h.rating,!0,i=>p(c=>({...c,rating:i})))]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium mb-2",children:"Comment"}),e.jsx("textarea",{value:h.comment,onChange:i=>p(c=>({...c,comment:i.target.value})),className:"w-full p-3 border rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent",rows:"4",placeholder:"Update your review..."})]}),e.jsxs("div",{className:"flex gap-2",children:[e.jsx(o,{onClick:()=>z(s._id,h),size:"sm",children:"Save Changes"}),e.jsx(o,{variant:"outline",onClick:()=>u(null),size:"sm",children:"Cancel"})]})]}):e.jsxs("div",{children:[e.jsxs("div",{className:"flex items-start justify-between mb-4",children:[e.jsxs("div",{className:"flex-1",children:[e.jsxs("div",{className:"flex items-center gap-3 mb-2",children:[e.jsx("h3",{className:"text-lg font-semibold text-gray-900",children:((r=s.service)==null?void 0:r.title)||"Service Review"}),e.jsx(F,{variant:"outline",children:(t=s.service)==null?void 0:t.category})]}),e.jsxs("div",{className:"flex items-center gap-4 text-sm text-gray-600",children:[f(s.rating),e.jsxs("div",{className:"flex items-center gap-1",children:[e.jsx(A,{size:14}),e.jsx("span",{children:new Date(s.createdAt).toLocaleDateString()})]})]})]}),e.jsxs("div",{className:"flex gap-2",children:[e.jsx(o,{variant:"outline",size:"sm",onClick:()=>{var i;u(s._id),p({rating:s.rating,comment:s.comment,serviceId:(i=s.service)==null?void 0:i._id})},children:e.jsx(D,{size:14})}),e.jsx(o,{variant:"outline",size:"sm",onClick:()=>L(s._id),className:"text-red-600 hover:text-red-700",children:e.jsx(V,{size:14})})]})]}),e.jsx("p",{className:"text-gray-700 mb-4 leading-relaxed",children:s.comment}),s.service&&e.jsxs("div",{className:"p-4 bg-gray-50 rounded-lg",children:[e.jsx("h4",{className:"font-semibold text-gray-900 mb-2",children:"Service Details"}),e.jsxs("div",{className:"flex items-center gap-4 text-sm text-gray-600",children:[e.jsxs("span",{children:["Category: ",s.service.category]}),s.service.pricing&&e.jsxs("span",{children:["Price: $",s.service.pricing.amount]})]})]}),s.adminResponse&&e.jsxs("div",{className:"mt-4 p-4 bg-blue-50 rounded-lg",children:[e.jsx("h4",{className:"font-semibold text-blue-900 mb-2",children:"Admin Response"}),e.jsx("p",{className:"text-blue-800",children:s.adminResponse})]})]})})},s._id)}),g.length===0&&e.jsxs(x.div,{initial:{opacity:0},animate:{opacity:1},className:"text-center py-12",children:[e.jsx(P,{className:"mx-auto text-gray-400 mb-4",size:48}),e.jsx("h3",{className:"text-xl font-semibold text-gray-900 mb-2",children:"No Reviews Found"}),e.jsx("p",{className:"text-gray-600 mb-6",children:d||l!=="all"?"Try adjusting your search or filter criteria":"You haven't written any reviews yet"}),!d&&l==="all"&&e.jsx(o,{onClick:()=>window.location.href="/services",children:"Browse Services to Review"})]})]})]})})};export{Z as default};
