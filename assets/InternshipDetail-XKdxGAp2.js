import{h as D,A as m,b as I,d as P,u as E,a as u,j as e,e as B,m as f,M as q,C as k,B as j,f as G}from"./index-Ck2EgO-1.js";import{a as F}from"./index-xsH4HHeE.js";import{C as b}from"./Card-DdUEfcKR.js";import{c as v,B as g}from"./index-CKNSqqfH.js";import{G as R}from"./GradientText-C_AMse_i.js";import{A as T}from"./arrow-left-BXfN_HOh.js";import{C as U}from"./clock-F5-Yp8Wi.js";import{C as O}from"./calendar-9uU3rAgK.js";import{U as M}from"./users-D8Uc0QYP.js";import{D as H}from"./dollar-sign-YBQgvHpg.js";import{S as _}from"./send-Dx1mu3zh.js";import{S as Q,H as W}from"./share-2-BOgf-DZs.js";import{D as X}from"./download-pfb1Hwy0.js";const N=F.create({baseURL:D.base,timeout:1e4,headers:{"Content-Type":"application/json"}});N.interceptors.request.use(a=>{const t=localStorage.getItem("token");return t&&(a.headers.Authorization=`Bearer ${t}`),a},a=>Promise.reject(a));N.interceptors.response.use(a=>a,a=>{var t;return((t=a.response)==null?void 0:t.status)===401&&(localStorage.removeItem("token"),window.location.href="/login"),Promise.reject(a)});const p=()=>{const a=localStorage.getItem("token");return{"Content-Type":"application/json",...a&&{Authorization:`Bearer ${a}`}}},A={getAll:async(a={})=>{try{const t=new URLSearchParams(a).toString(),n=`${m}/internships${t?`?${t}`:""}`,s=await fetch(n,{method:"GET",headers:p()}),l=await s.json();if(!s.ok)throw new Error(l.message||"Failed to fetch internships");return l}catch(t){throw console.error("Get internships error:",t),t}},getById:async a=>{try{const t=await fetch(`${m}/internships/${a}`,{method:"GET",headers:p()}),n=await t.json();if(!t.ok)throw new Error(n.message||"Failed to fetch internship");return n}catch(t){throw console.error("Get internship error:",t),t}},apply:async(a,t)=>{try{const n=new FormData;Object.keys(t).forEach(d=>{d!=="resume"&&d!=="coverLetter"&&n.append(d,t[d])}),t.resume&&n.append("resume",t.resume),t.coverLetter&&n.append("coverLetter",t.coverLetter);const s=localStorage.getItem("token"),l={};s&&(l.Authorization=`Bearer ${s}`);const c=await fetch(`${m}/internships/${a}/apply`,{method:"POST",headers:l,body:n}),y=await c.json();if(!c.ok)throw new Error(y.message||"Failed to submit application");return y}catch(n){throw console.error("Apply internship error:",n),n}},getUserApplications:async()=>(await N.get(`${m}/user/applications`,{headers:p()})).data,getApplicationById:async a=>(await N.get(`${m}/user/applications/${a}`,{headers:p()})).data,getCategories:async()=>{try{const a=await fetch(`${m}/internships/categories`,{method:"GET",headers:p()}),t=await a.json();if(!a.ok)throw new Error(t.message||"Failed to fetch categories");return t}catch(a){throw console.error("Get categories error:",a),a}},search:async(a,t={})=>{try{const n={q:a,...t},s=new URLSearchParams(n).toString(),l=await fetch(`${m}/internships/search?${s}`,{method:"GET",headers:p()}),c=await l.json();if(!l.ok)throw new Error(c.message||"Search failed");return c}catch(n){throw console.error("Search error:",n),n}}},oe=()=>{const{id:a}=I(),t=P(),{user:n}=E(),[s,l]=u.useState(null),[c,y]=u.useState(!0),[d,w]=u.useState(!1),[o,h]=u.useState({coverLetter:"",resume:null,portfolio:"",availability:""});u.useEffect(()=>{C()},[a]);const C=async()=>{try{const i=await A.getById(a);l(i.data)}catch{v.error("Failed to load internship details"),t("/internships")}finally{y(!1)}},$=async i=>{if(i.preventDefault(),!n){v.error("Please login to apply for internships"),t("/login");return}w(!0);try{const r=new FormData;r.append("internshipId",a),r.append("coverLetter",o.coverLetter),r.append("portfolio",o.portfolio),r.append("availability",o.availability),o.resume&&r.append("resume",o.resume),await A.apply(r),v.success("Application submitted successfully!"),h({coverLetter:"",resume:null,portfolio:"",availability:""})}catch{v.error("Failed to submit application")}finally{w(!1)}},S=i=>{const r=Math.ceil((new Date(i)-new Date)/864e5);return r<=3?"text-red-500":r<=7?"text-yellow-500":"text-green-500"},z=i=>{const r=Math.ceil((new Date(i)-new Date)/864e5);return r>0?r:0};if(c)return e.jsx(B,{fullScreen:!0});if(!s)return null;const x=z(s.deadline),L=x===0;return e.jsx("div",{className:"min-h-screen bg-gradient-to-br from-green-50 via-white to-blue-50",children:e.jsxs("div",{className:"container mx-auto px-4 py-8",children:[e.jsxs(f.button,{initial:{opacity:0,x:-20},animate:{opacity:1,x:0},onClick:()=>t("/internships"),className:"flex items-center gap-2 text-gray-600 hover:text-blue-600 mb-6 transition-colors",children:[e.jsx(T,{size:20}),"Back to Internships"]}),e.jsxs("div",{className:"grid lg:grid-cols-3 gap-8",children:[e.jsxs("div",{className:"lg:col-span-2 space-y-6",children:[e.jsx(f.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},children:e.jsxs(b,{className:"p-8",children:[e.jsxs("div",{className:"flex flex-wrap gap-2 mb-4",children:[e.jsx(g,{variant:"primary",children:s.category}),e.jsx(g,{variant:s.type==="paid"?"success":"outline",children:s.type}),e.jsx(g,{variant:s.remote?"info":"outline",children:s.remote?"Remote":"On-site"}),L&&e.jsx(g,{variant:"danger",children:"Expired"})]}),e.jsx(R,{className:"text-3xl font-bold mb-4",children:s.title}),e.jsxs("div",{className:"flex flex-wrap items-center gap-6 mb-6 text-gray-600",children:[e.jsxs("div",{className:"flex items-center gap-1",children:[e.jsx(q,{size:16}),e.jsx("span",{children:s.location})]}),e.jsxs("div",{className:"flex items-center gap-1",children:[e.jsx(U,{size:16}),e.jsx("span",{children:s.duration})]}),e.jsxs("div",{className:"flex items-center gap-1",children:[e.jsx(O,{size:16}),e.jsxs("span",{className:S(s.deadline),children:[x," days left"]})]}),e.jsxs("div",{className:"flex items-center gap-1",children:[e.jsx(M,{size:16}),e.jsxs("span",{children:[s.spotsAvailable," spots available"]})]}),s.stipend&&e.jsxs("div",{className:"flex items-center gap-1",children:[e.jsx(H,{size:16}),e.jsxs("span",{children:["$",s.stipend,"/month"]})]})]}),e.jsx("p",{className:"text-gray-700 leading-relaxed mb-6",children:s.description}),s.requirements&&s.requirements.length>0&&e.jsxs("div",{className:"mb-6",children:[e.jsx("h3",{className:"text-xl font-semibold mb-4",children:"Requirements"}),e.jsx("div",{className:"space-y-2",children:s.requirements.map((i,r)=>e.jsxs("div",{className:"flex items-start gap-2",children:[e.jsx(k,{className:"text-green-500 mt-0.5",size:16}),e.jsx("span",{children:i})]},r))})]}),s.skills&&s.skills.length>0&&e.jsxs("div",{className:"mb-6",children:[e.jsx("h3",{className:"text-xl font-semibold mb-4",children:"Required Skills"}),e.jsx("div",{className:"flex flex-wrap gap-2",children:s.skills.map((i,r)=>e.jsx(g,{variant:"outline",children:i},r))})]}),s.benefits&&s.benefits.length>0&&e.jsxs("div",{className:"mb-6",children:[e.jsx("h3",{className:"text-xl font-semibold mb-4",children:"What You'll Get"}),e.jsx("div",{className:"grid md:grid-cols-2 gap-3",children:s.benefits.map((i,r)=>e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(k,{className:"text-blue-500",size:16}),e.jsx("span",{children:i})]},r))})]})]})}),!L&&e.jsx(f.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:.2},children:e.jsxs(b,{className:"p-6",children:[e.jsx("h3",{className:"text-2xl font-bold mb-6",children:"Apply for this Internship"}),n?e.jsxs("form",{onSubmit:$,className:"space-y-6",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium mb-2",children:"Cover Letter *"}),e.jsx("textarea",{value:o.coverLetter,onChange:i=>h(r=>({...r,coverLetter:i.target.value})),className:"w-full p-3 border rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent",rows:"6",placeholder:"Tell us why you're interested in this internship...",required:!0})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium mb-2",children:"Resume *"}),e.jsx("input",{type:"file",accept:".pdf,.doc,.docx",onChange:i=>h(r=>({...r,resume:i.target.files[0]})),className:"w-full p-3 border rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent",required:!0}),e.jsx("p",{className:"text-sm text-gray-500 mt-1",children:"Upload your resume (PDF, DOC, DOCX)"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium mb-2",children:"Portfolio URL"}),e.jsx("input",{type:"url",value:o.portfolio,onChange:i=>h(r=>({...r,portfolio:i.target.value})),className:"w-full p-3 border rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent",placeholder:"https://your-portfolio.com"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium mb-2",children:"Availability *"}),e.jsxs("select",{value:o.availability,onChange:i=>h(r=>({...r,availability:i.target.value})),className:"w-full p-3 border rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent",required:!0,children:[e.jsx("option",{value:"",children:"Select your availability"}),e.jsx("option",{value:"immediate",children:"Immediate"}),e.jsx("option",{value:"2-weeks",children:"2 weeks notice"}),e.jsx("option",{value:"1-month",children:"1 month notice"}),e.jsx("option",{value:"flexible",children:"Flexible"})]})]}),e.jsxs(j,{type:"submit",disabled:d,className:"w-full",size:"lg",children:[d?"Submitting...":"Submit Application",e.jsx(_,{size:16})]})]}):e.jsxs("div",{className:"text-center py-8",children:[e.jsx("p",{className:"text-gray-600 mb-4",children:"Please login to apply for this internship"}),e.jsx(j,{onClick:()=>t("/login"),children:"Login to Apply"})]})]})})]}),e.jsxs("div",{className:"space-y-6",children:[e.jsx(f.div,{initial:{opacity:0,x:20},animate:{opacity:1,x:0},transition:{delay:.1},children:e.jsxs(b,{className:"p-6 sticky top-6",children:[e.jsx("h3",{className:"font-semibold mb-4",children:"Quick Info"}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-gray-600",children:"Duration"}),e.jsx("span",{className:"font-semibold",children:s.duration})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-gray-600",children:"Type"}),e.jsx("span",{className:"font-semibold capitalize",children:s.type})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-gray-600",children:"Location"}),e.jsx("span",{className:"font-semibold",children:s.location})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-gray-600",children:"Spots"}),e.jsx("span",{className:"font-semibold",children:s.spotsAvailable})]}),s.stipend&&e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-gray-600",children:"Stipend"}),e.jsxs("span",{className:"font-semibold",children:["$",s.stipend,"/month"]})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-gray-600",children:"Deadline"}),e.jsx("span",{className:`font-semibold ${S(s.deadline)}`,children:new Date(s.deadline).toLocaleDateString()})]})]}),x<=7&&x>0&&e.jsxs("div",{className:"mt-4 p-3 bg-yellow-50 border border-yellow-200 rounded-lg",children:[e.jsxs("div",{className:"flex items-center gap-2 text-yellow-700",children:[e.jsx(G,{size:16}),e.jsx("span",{className:"text-sm font-medium",children:"Deadline approaching!"})]}),e.jsxs("p",{className:"text-sm text-yellow-600 mt-1",children:["Only ",x," days left to apply"]})]}),e.jsxs("div",{className:"flex gap-2 mt-6",children:[e.jsxs(j,{variant:"outline",className:"flex-1",children:[e.jsx(Q,{size:16}),"Share"]}),e.jsxs(j,{variant:"outline",className:"flex-1",children:[e.jsx(W,{size:16}),"Save"]})]})]})}),e.jsx(f.div,{initial:{opacity:0,x:20},animate:{opacity:1,x:0},transition:{delay:.2},children:e.jsxs(b,{className:"p-6",children:[e.jsx("h3",{className:"font-semibold mb-4",children:"About GG Private Limited"}),e.jsx("p",{className:"text-gray-600 text-sm mb-4",children:"Leading technology company providing innovative solutions and fostering the next generation of tech talent."}),e.jsxs(j,{variant:"outline",className:"w-full",children:[e.jsx(X,{size:16}),"Company Profile"]})]})})]})]})]})})};export{oe as default};
